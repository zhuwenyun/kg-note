


PushConsumer消费消息时，消息的几个主要状态如下：
Ready：已就绪状态。
消息在云消息队列 RocketMQ 版服务端已就绪，可以被消费者消费。

Inflight：处理中状态。
消息被消费者客户端获取，处于消费中还未返回消费结果的状态。

WaitingRetry：待重试状态，PushConsumer独有的状态。
当消费者消息处理失败或消费超时，会触发消费重试逻辑判断。如果当前重试次数未达到最大次数，则该消息变为待重试状态，经过重试间隔后，消息将重新变为已就绪状态可被重新消费。多次重试之间，可通过重试间隔进行延长，防止无效高频的失败。

Commit：提交状态。
消费成功的状态，消费者返回成功响应即可结束消息的状态机。

DLQ：死信状态。
消费逻辑的最终兜底机制，消息重试失败且超过最大重试次数，若保存死信消息功能开启，该失败消息会被投递至死信Topic。您可以通过消费死信Topic的消息进行业务恢复。具体信息，请参见死信消息。

Discard：丢弃。
消息重试失败且超过最大重试次数，若保存死信消息功能未开启，该失败消息会被直接丢弃。

举例：某条消息的消费重试流程如上图所示，假设消息处于已就绪状态的时长为5 s，消费耗时为6 s。
每次重试消息状态都会经过已就绪->处理中->待重试的变化，消息的重试间隔指的是上一次消费失败或超时后，距下次消息可被重新消费的间隔时间。实际消息两次消费之间的间隔时间还包括消费耗时和已就绪状态的持续时间。例如：
消息第一次消费时第0 s进入已就绪状态。
受消费者处理速度的影响，到第5 s时才开始拉取消息消费，6 s后消息处理异常客户端返回消费失败。
此时还不能进行消费重试，需要等待重试间隔后才能开始再次消费。
等到第21 s时消息再次变为已就绪状态。
5 s后客户端才再次开始重新消费消息。
因此，实际消息两次消费的间隔时间为：消费耗时+重试间隔+已就绪的持续时间=21 s。


重试间隔时间
无序消息（非顺序消息）：重试间隔为阶梯时间，具体时间如下：

| 第几次重试 | 重试间隔时间 | 第几次重试 | 重试间隔时间 |
| --- | --- | --- | --- |
| 1 | 10秒  | 9  | 7分钟 |
| 2 | 30秒  | 10 | 8分钟 |
| 3 | 1分钟 | 11 | 9分钟 |
| 4 | 2分钟 | 12 | 10分钟|
| 5 | 3分钟 | 13 | 20分钟|
| 6 | 4分钟 | 14 | 30分钟|
| 7 | 5分钟 | 15 | 1小时 |
| 8 | 6分钟 | 16 | 2小时 |

说明
若重试次数超过16次，后面每次重试间隔都为2小时。
顺序消息：重试间隔为固定时间，1000毫秒。

最大重试次数
默认值：16次。

最大限制：不超过1000次。

PushConsumer的最大重试次数由消费者分组的元数据控制，修改方式，请参见修改最大重试次数。

例如，最大重试次数为3次，则该消息最多可被投递4次，1次为原始消息，3次为重试投递次数。